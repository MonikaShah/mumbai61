{% extends '../base.html' %} 

 {% load static %} {% load i18n %}
 {% block extra_css %}

<!-- Bootstrap CSS -->

<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
<link rel="stylesheet" href="{% static 'css/footer.css' %}">
<link rel="stylesheet" href="{% static 'css/leaflet.css' %}">
<link rel="stylesheet" href="{% static 'plugins/L.Control.Pan.css' %}">
<link rel="stylesheet" href="{% static 'plugins/L.Control.Zoomslider.css' %}">
<link rel="stylesheet" href="{% static 'plugins/L.Control.MousePosition.css' %}">
<link rel="stylesheet" href="{% static 'plugins/L.Control.Sidebar.css' %}">
<link rel="stylesheet" href="{% static 'plugins/Leaflet.PolylineMeasure.css' %}">
<link rel="stylesheet" href="{% static 'plugins/easy-button.css' %}">
<link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
<link rel="stylesheet" href="{% static 'css/mycss.css' %}">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="{% static 'front.css' %}">

<script src="{% static 'leaflet-src.js' %}"></script>
<!-- <script src="src/jquery-3.2.0.min.js"></script> -->
<script src="{% static 'plugins/L.Control.Pan.js' %}"></script>
<script src="{% static 'plugins/L.Control.Zoomslider.js' %}"></script>
<script src="{% static 'plugins/L.Control.MousePosition.js' %}"></script>
<script src="{% static 'plugins/L.Control.Sidebar.js' %}"></script>
<script src="{% static 'plugins/Leaflet.PolylineMeasure.js' %}"></script>
<script src="{% static 'plugins/easy-button.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-providers/1.13.0/leaflet-providers.js" integrity="sha512-pb9UiEEi2JIxkMloqYnqgONe9CTcp2BWWq1Hbz60l7f3R3VhZ57dEE58Ritf/HgBw3o/5Scf5gg0T9V+tf48fg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{% static 'plugins/leaflet-opencage/src/js/L.Control.OpenCageSearch.js' %}"></script>
<!-- <script src="{% static 'app.js' %}"></script> -->
<!-- <link rel="stylesheet" type="leaflet.wms.js" href="{% static 'css/component.css' %}"  /> -->
<link rel="stylesheet" href="{% static 'css/mystyle.css' %}">
<link rel='stylesheet' href="{% static 'css/component.css' %}">
<script src="{% static 'plugins/leaflet.ajax.min.js' %}"></script>
<script src="{% static 'js/modernizr-custom.js' %}"></script>
<script src="{% static 'js/leaflet.wms.js' %}"></script>

<script src="{% static 'js/classie.js' %}"></script>
<!-- <script src="js/dummydata.js"></script> -->
<!-- <script src="src/js/main.js"></script> -->
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/myscript.js' %}"></script>


<!-- scripts for spinner -->

<script src="{% static 'spin/spin.js'%}"></script>
<script src="{% static 'js/leaflet.spin.min.js' %}"></script>

<!-- font-awesome -->
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


<!-- script for leaflet font awesome-->
<script src="{% static 'js/leaflet.awesome-markers.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/leaflet.awesome-markers.css' %}">



<!-- leaflet-messagebox-->
<script src="{% static 'leaflet-messagebox.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet-messagebox.css' %}">

<!-- leaflet-measure-->
<script src="{% static 'leaflet_measure/leaflet.measure.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet_measure/leaflet.measure.css' %}">


<!-- leaflet-search -->
<script src="{% static 'leaflet-search/leaflet-search.src.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet-search/leaflet-search.src.css' %}">


<!-- leaflet minimap -->
<script src="{% static 'leaflet-minimap/Control.MiniMap.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet-minimap/Control.MiniMap.min.css' %}">

<script type='text/javascript' src='https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js'></script>


<!-- leaflet lagend graphic -->

<script src="{% static 'leaflet-legend-graphics/leaflet.wmslegend.js' %}"></script>
<link rel="stylesheet" href="{% static 'leaflet-legend-graphics/leaflet.wmslegend.css' %}">

<!-- <link rel="stylesheet" href=""/>
          <script src="leaflet-legend-graphics/leaflet.wmslegend.js"></script> -->




<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" /> {# Global stylesheets #}
<!-- <link href="{% static 'css/bootstrap.min.css'%}" rel="stylesheet"> -->
<!-- <link href="icon" type = "image/png" href = "{% static 'images/trash-can-23640_960_720.png' %}"/> -->

<style>
    .select {
        background: rgb(255, 255, 255);
    }
    #container1 {
  position: relative;
  /* z-index: -1;  */
}
.dropdown, .dropdown-menu.show{
    opacity: 1;
    z-index: 999;
}
/* #legend,#my_dataviz{
position:absolute;
background-color: white;
z-index:999;
left:90%;
top:50%;
} */
circle{
    z-index: 999;
}
    .select.highlight {
        background: rgb(26, 255, 0);
    }
</style>
{% block extra_map_css%} {% endblock extra_map_css%} {% endblock extra_css%} {% block content%}
<div id='container1'>
<div id="mapdiv"></div>

<!-- <div id="legend-container" class="leaflet-control leaflet-control-wms-legend"></div> -->
<!-- <div id="legend" style="display: none;">
    <svg id="my_dataviz"></svg>
  </div> -->
</div>
{% block map_content%} {% endblock map_content%} {% endblock content%} {% block extra_javascript %}

<script>
    var mymap;

    var source = L.wms.source(
        "https://geoserver2.communitygis.net/geoserver/wms", {
            "format": "image/png",
            "transparent": "true"
        }
    );

    var source = L.wms.source(
        "https://geoserver2.communitygis.net/geoserver/wms", {
            "format": "image/png",
            "transparent": "true"
        }
    );

    mymap = L.map('mapdiv', {
        // center:[19.7515,75.7139],
        center: [19.1233, 72.7784],
        zoom: 12,
        zoomControl: false,
        attributionControl: false,
        messagebox: true,
        contextmenu: true,
        measureControl: false
    });
    let tiles = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
      'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1
  }).addTo(mymap);

    
    mymap.invalidateSize();
    mymap.getSize();
    mymap.messagebox.options.timeout = 5000;
    mymap.messagebox.setPosition("bottomright");
    lyrOSM = L.tileLayer.provider('OpenStreetMap.Mapnik');
    lyrOSM2 = L.tileLayer.provider('OpenStreetMap.Mapnik');
    lyrImagery = L.tileLayer.provider('Esri.WorldImagery');
    mymap.addLayer(lyrOSM);
    var miniMap = new L.Control.MiniMap(lyrOSM2, {
        toggleDisplay: true
    }).addTo(mymap);
    //  var miniMap = new L.Control.MiniMap(lyrOSM).addTo(mymap);

    function round(value, precision) {
        var multiplier = Math.pow(10, precision || 0);
        return Math.round(value * multiplier) / multiplier;
    }


    function copyToClipboard(text) {
        var dummy = document.createElement("textarea");
        // dummy.style.display = 'none'
        document.body.appendChild(dummy);
        dummy.value = text;
        dummy.select();
        document.execCommand("copy");
        document.body.removeChild(dummy);
    }

    mymap.on('contextmenu', function(e) {
        copyToClipboard(e.latlng.lat + "," + e.latlng.lng);
        mymap.messagebox.show("<h6>Latitude:<b>" + round(e.latlng.lat, 4) + "</b> Longitude:<b>" + round(e.latlng.lng, 4) + "</b> copied to clipboard</h6>");
    });



    $('.select').click(function() {
        $(this).toggleClass('highlight')
    })
</script>
<script>
    $("#closebutton").click(function() {
        ctlSidebar.toggle();
    });



    objBasemaps = {
        "Open Street Maps": lyrOSM,
        "Imagery": lyrImagery
    };

    objOverlays = {};

    // var ctlLayers = L.control.layers(objBasemaps, objOverlays).addTo(mymap);
    var ctlSidebar = L.control.sidebar('side-bar').addTo(mymap);
    var ctlPan = L.control.pan().addTo(mymap);

    var ctlEasybutton = L.easyButton('fa fa fa-bars', function() {
        ctlSidebar.toggle();
    }).addTo(mymap);
    ctlSidebar.show();

    var ctlZoomslider = L.control.zoomslider({
        position: 'topright'
    }).addTo(mymap);

    ctlAttribute = L.control.attribution({
        position: 'bottomleft'
    }).addTo(mymap);
    // ctlAttribute.addAttribution('&copy; <a href="http://www.makerghat.org">makerGHAT</a>');
</script>
{% block extra_map_javascript%} {% endblock extra_map_javascript%} {% endblock extra_javascript %}
